--- 
title: "Evaluating Discards using Observer Data Guyana`s Shrimp Fishery"
author: "Seion Richardson"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
output: bookdown::gitbook
documentclass: book
bibliography: [book.bib, packages.bib]
biblio-style: apalike
link-citations: yes
github-repo: rstudio/bookdown-demo

---

# Data

## Fishing Area

<center>

![Figure 1 Map of Guyana EEZ. The Yellow boundary lines represents the different zone demarcations. The Seabob trawling zone (15 to 33 meter lines) is colored red (Richardson, 2020).](C:\Users\UNUFTP\Documents\MyGit\Masters-Thesis-Seion\GuyanaEEZ.png){width=65%}

</center>

<br>

```{r 0.1, include = FALSE}
knitr::opts_chunk$set(echo = TRUE,
  #cache = FALSE,
  cache = TRUE,
  fig.align = "center",
  strip.white = TRUE,
  highlight = TRUE,
  comment = " ",
  message = FALSE
)
```

```{r 0.2, include = FALSE}
library(bookdown)
library(tidyverse)
library(kableExtra)
library(tidytext)
library(gridExtra)
library(broom)
library(rcompanion)
library(corrplot)
library(FSA)
library(lattice)
library(Hmisc)
library(mclust)
library(MASS)
library(RColorBrewer)
library(FactoMineR)
library(cluster)    # clustering algorithms
library(factoextra) # clustering algorithms & visualization
library(GGally)
library(vegan)
library(psych)
library(PerformanceAnalytics)
library(CCA)
library(CCP)
```

```{r 0.3, message = FALSE}
# Reading in data 
ObserverData <- read_csv("observer_weights_mas102m.csv") %>% 
  filter(hrs_dec > 2) # Removing trip 28 from data

```

```{r 0.4}
# Renaming of variables 
ObserverData <-  ObserverData %>% 
  dplyr::rename(Company = company, 
    Departure = dep_date,
    Arrival = arr_date, 
    DaysAtSea = das, 
    TripID = trip, 
    DragID = drag, 
    DragID2 = drag_all, 
    DragDate = drag_date,
    Day = day,
    Month = month,
    Year = year,
    FishingZones = zone,
    TimePeriods = drag_period, 
    DragStart = drag_time_s, 
    DragEnd = drag_time_e, 
    TimeFishedHrs = time_fished_min, 
    TimeFishedDec = hrs_dec, 
    FishingDepthFtm = depth, 
    FishingDepth2 = depth_sd, 
    SpeciesID = id_status, 
    EconomicStatus = com_status, 
    OrderTax = order, 
    FamilyTax = family, 
    ClassTax = class, 
    CatchCategory = total_catch_cat, 
    SpeciesCategory = total_catch_spp, 
    SpeciesCategory2 = categories,
    SpeciesCategory3 = categories2,
    LatinNames = sci_name, 
    AplhaCode = alpha_code, 
    CommonName = com_name, 
    SampleWeightLB = sample_wt_lbs, 
    TotalWeightLB = total_wt_lbs)
```

## Creating a few additonal variables

Four new variables were added to the data. These variables will change the convert older variables from **Imperial** to **Metric** units (e.g. pounds to kilograms).  

```{r 0.5}
ObserverData <- ObserverData %>% 
  mutate(SampleWeightKG = round(SampleWeightLB/2.2, 2), 
    TotalWeightKG = round(TotalWeightLB/2.2, 2),
    CpueKGHR = round(TotalWeightKG/TimeFishedDec, 5),
    FishingDepthMtr = round(FishingDepthFtm*1.8288))
```

## Dividing the data up by catch groups

```{r 0.6}
DiscardedCatch <- ObserverData %>%
  filter(CatchCategory == "Discarded catch")

IncidentalCatch <- ObserverData %>%
  filter(CatchCategory == "Incidental catch")

TargetCatch <- ObserverData %>%
  filter(CatchCategory == "Target catch")
```

### Data by bottom trawl tows sampled - Appendix

```{r 0.7}
# Creating Table
SummaryTable <- ObserverData %>% 
  group_by(TripID,
    Company,
    DragID2,
    Departure,
    Month,
    TimePeriods,
    FishingZones,
    FishingDepthMtr,
    Arrival,
    CatchCategory) %>% 
  dplyr::summarise(SumWeightsKG = round(sum(TotalWeightKG),2),
    MeanEffortHr = round(mean(TimeFishedDec),2),
    CpueKGHr = round(SumWeightsKG/MeanEffortHr,2),
    CountSpecies = n()) %>%  
  mutate(PropWeight = round(SumWeightsKG/sum(SumWeightsKG),2)) %>%   arrange(DragID2)


# Print Table
SummaryTable %>% 
  kbl() %>%
  kable_classic() %>% 
  row_spec(0, bold = TRUE) %>% 
  kable_styling(fixed_thead = T,
    bootstrap_options = "condensed") %>% 
  scroll_box(width = "750px", height = "600px")

```


```{r 0.8, include = FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(),
  'tidyverse',
  'kableExtra'),
  'packages.bib')
```